<!DOCTYPE HTML>

<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>SLACjs Test</title>
</head>

<body>

<h1>SLAC.js test</h1>
<button id="toggle-particle-traces">Toggle particle traces</button>
<div id="map" style="height: 700px; width: 700px;"></div>

<script type="text/javascript" src="vendor/jquery/jquery-2.1.3.js"></script>
<script type="text/javascript" src="vendor/highcharts/js/highcharts.js"></script>
<script type="text/javascript" src="vendor/jstat/jstat.js"></script>
<script type="text/javascript" src="app/util/math.js"></script>
<script type="text/javascript" src="app/models/node.js"></script>
<script type="text/javascript" src="app/models/particle.js"></script>
<script type="text/javascript" src="app/models/particle-set.js"></script>
<script type="text/javascript" src="app/models/user.js"></script>
<script type="text/javascript" src="app/app.js"></script>

<script type="text/javascript">
var maxLoops = 50;
var currentLoop = 0;
var app;
var loop = function() {

	var i = 0;

	var iterate = function() {

		app.iterate();

		if(i++ < 50) {
			setTimeout(iterate, 0);
		}
		else {
			

			setTimeout(function() {
				app.reset();
				loop();
			}, 5000);
		}
	};

	setTimeout(iterate, 1000);
}

$(document).ready(function(){
	app.initialize({
		mapElement: 	'map',
		nNodes: 		10,
		xMax: 			50,
		yMax:			50,  
		nNodes: 		20,
		nParticles: 	30,
		plotParticleTraces: true,
	});

	setTimeout(loop, 1000);

});

$('#toggle-particle-traces').click(function() {
	app.config.plotParticleTraces = ! app.config.plotParticleTraces;
})
</script>
</body>
</html>